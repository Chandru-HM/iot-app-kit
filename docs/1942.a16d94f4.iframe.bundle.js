"use strict";(self.webpackChunk_iot_app_kit_doc_site=self.webpackChunk_iot_app_kit_doc_site||[]).push([[1942],{"../node_modules/@iot-app-kit-visualizations/core/dist/esm-es5/chartScene-46f75e52.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{c:()=>chartScene,u:()=>updateChartScene});var _getDataPoints_1a3cf1be_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../node_modules/@iot-app-kit-visualizations/core/dist/esm-es5/getDataPoints-1a3cf1be.js"),_clipSpaceConversion_3d30ad2d_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../node_modules/@iot-app-kit-visualizations/core/dist/esm-es5/clipSpaceConversion-3d30ad2d.js"),_getDistanceFromDuration_5c7da5d2_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../node_modules/@iot-app-kit-visualizations/core/dist/esm-es5/getDistanceFromDuration-5c7da5d2.js"),getBarWidth=function(_a){var toClipSpace=_a.toClipSpace,resolution=_a.resolution,numDataStreams=_a.numDataStreams;return((0,_getDistanceFromDuration_5c7da5d2_js__WEBPACK_IMPORTED_MODULE_2__.g)(toClipSpace,resolution)-function(toClipSpace,resolution){return(0,_getDistanceFromDuration_5c7da5d2_js__WEBPACK_IMPORTED_MODULE_2__.g)(toClipSpace,.16666666666666666*resolution)}(toClipSpace,resolution))/numDataStreams},getUniformWidth=function(dataStreams,toClipSpace){if(0===dataStreams.length)return 0;var resolution=dataStreams[0].resolution;return getBarWidth({toClipSpace,numDataStreams:dataStreams.length,resolution})},updateMesh=function(_a){var dataStreams=_a.dataStreams,mesh=_a.mesh,toClipSpace=_a.toClipSpace,thresholds=_a.thresholds,thresholdOptions=_a.thresholdOptions,streamVertexSets=dataStreams.filter(_getDataPoints_1a3cf1be_js__WEBPACK_IMPORTED_MODULE_0__.i).map((function(stream){return(0,_clipSpaceConversion_3d30ad2d_js__WEBPACK_IMPORTED_MODULE_1__.v)(stream,stream.resolution)}));mesh.count=function(streamVertexSets){return streamVertexSets.reduce((function(totalBars,streamVertexSet){return totalBars+streamVertexSet.length}),0)}(streamVertexSets);var _b=mesh.geometry.attributes,color=_b.color,bar=_b.bar,positionIndex=0,colorIndex=0;streamVertexSets.forEach((function(streamVertexSet,setIndex){streamVertexSet.forEach((function(currVertex){var currX=currVertex[0],currY=currVertex[1],r=currVertex[2],g=currVertex[3],b=currVertex[4];bar.array[positionIndex]=toClipSpace(currX)-setIndex*getUniformWidth(dataStreams,toClipSpace),bar.array[positionIndex+1]=currY;var breachedThreshold=(0,_getDataPoints_1a3cf1be_js__WEBPACK_IMPORTED_MODULE_0__.e)(currY,thresholds);if(null!=breachedThreshold&&thresholdOptions.showColor){var _a=(0,_clipSpaceConversion_3d30ad2d_js__WEBPACK_IMPORTED_MODULE_1__.g)(breachedThreshold.color),rr=_a[0],gg=_a[1],bb=_a[2];color.array[colorIndex]=rr,color.array[colorIndex+1]=gg,color.array[colorIndex+2]=bb}else color.array[colorIndex]=r,color.array[colorIndex+1]=g,color.array[colorIndex+2]=b;colorIndex+=3,positionIndex+=2}))})),bar.needsUpdate=!0,color.needsUpdate=!0},unitSquare=[0,0,0,1,1,0,0,1,1,0,1,1],barMesh=function(_a){var dataStreams=_a.dataStreams,toClipSpace=_a.toClipSpace,bufferFactor=_a.bufferFactor,minBufferSize=_a.minBufferSize,thresholdOptions=_a.thresholdOptions,thresholds=_a.thresholds,instGeo=new _getDataPoints_1a3cf1be_js__WEBPACK_IMPORTED_MODULE_0__.I,bufferSize=Math.max(minBufferSize,(0,_clipSpaceConversion_3d30ad2d_js__WEBPACK_IMPORTED_MODULE_1__.n)(dataStreams)*bufferFactor);!function(geometry,bufferSize){geometry.setAttribute("position",new _getDataPoints_1a3cf1be_js__WEBPACK_IMPORTED_MODULE_0__.B(new Float32Array(unitSquare),2)),geometry.setAttribute("bar",new _getDataPoints_1a3cf1be_js__WEBPACK_IMPORTED_MODULE_0__.b(new Float32Array(2*bufferSize),2,!1)),geometry.setAttribute("color",new _getDataPoints_1a3cf1be_js__WEBPACK_IMPORTED_MODULE_0__.b(new Uint8Array(3*bufferSize),3,!0))}(instGeo,bufferSize);var barChartMaterial=new _getDataPoints_1a3cf1be_js__WEBPACK_IMPORTED_MODULE_0__.R({vertexShader:"\nprecision highp float;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float width;\nattribute vec2 bar;\nattribute vec2 position;\nattribute vec3 color;\nvarying vec3 vColor;\n\nvoid main() {\n  // Negative width here because we want to render the bars' width to the left side starting from its x position.\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position.x * -width + bar.x, position.y * bar.y, 0.0, 1.0);\n  vColor = color;\n}\n",fragmentShader:"\nprecision highp float;\nvarying vec3 vColor;\n\nvoid main() {\n  gl_FragColor = vec4(vColor, 1.0);\n}\n",side:_getDataPoints_1a3cf1be_js__WEBPACK_IMPORTED_MODULE_0__.D,transparent:!1,uniforms:{width:{value:getUniformWidth(dataStreams,toClipSpace)}}}),mesh=new _getDataPoints_1a3cf1be_js__WEBPACK_IMPORTED_MODULE_0__.a(instGeo,barChartMaterial,bufferSize);return updateMesh({dataStreams,mesh,toClipSpace,thresholds,thresholdOptions}),mesh.frustumCulled=!1,mesh},chartScene=function(_a){var dataStreams=_a.dataStreams,container=_a.container,viewport=_a.viewport,bufferFactor=_a.bufferFactor,minBufferSize=_a.minBufferSize,onUpdate=_a.onUpdate,thresholdOptions=_a.thresholdOptions,thresholds=_a.thresholds,scene=new _getDataPoints_1a3cf1be_js__WEBPACK_IMPORTED_MODULE_0__.S,toClipSpace=(0,_clipSpaceConversion_3d30ad2d_js__WEBPACK_IMPORTED_MODULE_1__.a)(viewport);return scene.add(barMesh({dataStreams,toClipSpace,bufferFactor,minBufferSize,thresholdOptions,thresholds})),(0,_clipSpaceConversion_3d30ad2d_js__WEBPACK_IMPORTED_MODULE_1__.c)({scene,viewport,container,toClipSpace,onUpdate})},updateChartScene=function(_a){var scene=_a.scene,dataStreams=_a.dataStreams,hasDataChanged=_a.hasDataChanged,minBufferSize=_a.minBufferSize,bufferFactor=_a.bufferFactor,viewport=_a.viewport,container=_a.container,onUpdate=_a.onUpdate,chartSize=_a.chartSize,thresholdOptions=_a.thresholdOptions,thresholds=_a.thresholds,hasAnnotationChanged=_a.hasAnnotationChanged,bars=scene.scene.children[0],isDataOverflowingBuffer=function(bars){return bars.geometry.attributes.bar.array.length/2}(bars)<(0,_clipSpaceConversion_3d30ad2d_js__WEBPACK_IMPORTED_MODULE_1__.n)(dataStreams);return isDataOverflowingBuffer||(0,_clipSpaceConversion_3d30ad2d_js__WEBPACK_IMPORTED_MODULE_1__.b)(viewport,scene.toClipSpace)||hasAnnotationChanged?chartScene({onUpdate,dataStreams,container,viewport,minBufferSize,bufferFactor,chartSize,thresholdOptions,thresholds}):(function(_a){var bars=_a.bars,dataStreams=_a.dataStreams,toClipSpace=_a.toClipSpace,hasDataChanged=_a.hasDataChanged,thresholdOptions=_a.thresholdOptions,thresholds=_a.thresholds;hasDataChanged&&(bars.material.uniforms.width.value=getUniformWidth(dataStreams,toClipSpace),updateMesh({dataStreams,mesh:bars,toClipSpace,thresholds,thresholdOptions}))}({bars,dataStreams,toClipSpace:scene.toClipSpace,hasDataChanged,thresholdOptions,thresholds}),scene)}},"../node_modules/@iot-app-kit-visualizations/core/dist/esm-es5/chartSize-6ceb3800.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{C:()=>CHART_SIZE});var CHART_SIZE={width:100,height:100}},"../node_modules/@iot-app-kit-visualizations/core/dist/esm-es5/dataTypes-aaacf3dd.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>AggregateType,S:()=>STREAM_ICON_STROKE_LINECAP,T:()=>TREND_ICON_DASH_ARRAY,a:()=>STREAM_ICON_STROKE_WIDTH,b:()=>STREAM_ICON_PATH_COMMAND});var STREAM_ICON_STROKE_LINECAP="round",STREAM_ICON_STROKE_WIDTH=3,STREAM_ICON_PATH_COMMAND="M 2 2 H 15",TREND_ICON_DASH_ARRAY="1, 5",AggregateType={AVERAGE:"AVERAGE",COUNT:"COUNT",MAXIMUM:"MAXIMUM",MINIMUM:"MINIMUM",STANDARD_DEVIATION:"STANDARD_DEVIATION",SUM:"SUM"}},"../node_modules/@iot-app-kit-visualizations/core/dist/esm-es5/getDistanceFromDuration-5c7da5d2.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{g:()=>getDistanceFromDuration});var getDistanceFromDuration=function(toClipSpace,milliseconds){return Math.abs(toClipSpace(new Date(milliseconds).getTime())-toClipSpace(new Date(0).getTime()))}},"../node_modules/@iot-app-kit-visualizations/core/dist/esm-es5/iot-app-kit-vis-single-bar.entry.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{iot_app_kit_vis_single_bar:()=>ScSingleBar});var _index_c7728300_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../node_modules/@iot-app-kit-visualizations/core/dist/esm-es5/index-c7728300.js"),_webglContext_f702bea7_js__WEBPACK_IMPORTED_MODULE_2__=(__webpack_require__("../node_modules/@iot-app-kit-visualizations/core/dist/esm-es5/getDataPoints-1a3cf1be.js"),__webpack_require__("../node_modules/@iot-app-kit-visualizations/core/dist/esm-es5/webglContext-f702bea7.js")),_dataConstants_8e079f60_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../node_modules/@iot-app-kit-visualizations/core/dist/esm-es5/dataConstants-8e079f60.js"),_time_33466212_js__WEBPACK_IMPORTED_MODULE_6__=(__webpack_require__("../node_modules/@iot-app-kit-visualizations/core/dist/esm-es5/_commonjsHelpers-1d681858.js"),__webpack_require__("../node_modules/@iot-app-kit-visualizations/core/dist/esm-es5/clipSpaceConversion-3d30ad2d.js"),__webpack_require__("../node_modules/@iot-app-kit-visualizations/core/dist/esm-es5/time-33466212.js")),_chartSize_6ceb3800_js__WEBPACK_IMPORTED_MODULE_9__=(__webpack_require__("../node_modules/@iot-app-kit-visualizations/core/dist/esm-es5/constants-ebd051c2.js"),__webpack_require__("../node_modules/@iot-app-kit-visualizations/core/dist/esm-es5/v4-9366210a.js"),__webpack_require__("../node_modules/@iot-app-kit-visualizations/core/dist/esm-es5/chartSize-6ceb3800.js")),_dataTypes_aaacf3dd_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("../node_modules/@iot-app-kit-visualizations/core/dist/esm-es5/dataTypes-aaacf3dd.js"),_chartScene_46f75e52_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("../node_modules/@iot-app-kit-visualizations/core/dist/esm-es5/chartScene-46f75e52.js"),X_MIN=new Date(2e3,0,0),X_MAX=new Date(2e3,0,1),WIDTH=X_MAX.getTime()-X_MIN.getTime(),TEST_DATA_POINT_1={x:X_MIN.getTime()+WIDTH/3,y:50},ScSingleBar=function(){function ScSingleBar(hostRef){(0,_index_c7728300_js__WEBPACK_IMPORTED_MODULE_0__.r)(this,hostRef)}return ScSingleBar.prototype.componentDidLoad=function(){var _a,container=this.el.querySelector("#test-container"),scene=(0,_chartScene_46f75e52_js__WEBPACK_IMPORTED_MODULE_11__.c)({viewport:{start:X_MIN,end:X_MAX,yMin:0,yMax:100},dataStreams:[{id:"test-stream",name:"test-stream-name",color:"black",data:[],aggregationType:_dataTypes_aaacf3dd_js__WEBPACK_IMPORTED_MODULE_10__.A.AVERAGE,aggregates:(_a={},_a[_time_33466212_js__WEBPACK_IMPORTED_MODULE_6__.D]=[TEST_DATA_POINT_1],_a),resolution:_time_33466212_js__WEBPACK_IMPORTED_MODULE_6__.D,dataType:_dataConstants_8e079f60_js__WEBPACK_IMPORTED_MODULE_3__.D.NUMBER}],container,chartSize:_chartSize_6ceb3800_js__WEBPACK_IMPORTED_MODULE_9__.C,minBufferSize:100,bufferFactor:2,thresholdOptions:{showColor:!1},thresholds:[]});_webglContext_f702bea7_js__WEBPACK_IMPORTED_MODULE_2__.w.addChartScene({manager:scene});var rect=container.getBoundingClientRect();_webglContext_f702bea7_js__WEBPACK_IMPORTED_MODULE_2__.w.setChartRect(scene.id,Object.assign({density:1},rect.toJSON()))},ScSingleBar.prototype.render=function(){return(0,_index_c7728300_js__WEBPACK_IMPORTED_MODULE_0__.h)("iot-app-kit-vis-webgl-context",null,(0,_index_c7728300_js__WEBPACK_IMPORTED_MODULE_0__.h)("div",{id:"test-container",style:{width:_chartSize_6ceb3800_js__WEBPACK_IMPORTED_MODULE_9__.C.width+"px",height:_chartSize_6ceb3800_js__WEBPACK_IMPORTED_MODULE_9__.C.height+"px"}}))},Object.defineProperty(ScSingleBar.prototype,"el",{get:function(){return(0,_index_c7728300_js__WEBPACK_IMPORTED_MODULE_0__.g)(this)},enumerable:!1,configurable:!0}),ScSingleBar}()}}]);