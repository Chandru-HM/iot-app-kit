"use strict";(self.webpackChunk_iot_app_kit_doc_site=self.webpackChunk_iot_app_kit_doc_site||[]).push([[5249],{"../node_modules/@iot-app-kit-visualizations/core/dist/esm-es5/chartScene-e5d2354e.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{H:()=>HEIGHT,S:()=>STATUS_MARGIN_TOP_PX,c:()=>chartScene,u:()=>updateChartScene});var _getDataPoints_1a3cf1be_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../node_modules/@iot-app-kit-visualizations/core/dist/esm-es5/getDataPoints-1a3cf1be.js"),_clipSpaceConversion_3d30ad2d_js__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("../node_modules/@iot-app-kit-visualizations/core/dist/esm-es5/clipSpaceConversion-3d30ad2d.js"),_getDistanceFromDuration_5c7da5d2_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("../node_modules/@iot-app-kit-visualizations/core/dist/esm-es5/getDistanceFromDuration-5c7da5d2.js"),HEIGHT=1,STATUS_MARGIN_TOP_PX=33.5,DEFAULT_STATUS_BAR_COLOR_1=[213,219,219],DEFAULT_STATUS_BAR_COLOR_2=[135,149,150],updateMesh=function(_a){var dataStreams=_a.dataStreams,mesh=_a.mesh,toClipSpace=_a.toClipSpace,thresholds=_a.thresholds,thresholdOptions=_a.thresholdOptions,chartSize=_a.chartSize,alarms=_a.alarms,streamVertexSets=dataStreams.map((function(stream){return(0,_clipSpaceConversion_3d30ad2d_js__WEBPACK_IMPORTED_MODULE_1__.v)(stream,stream.resolution)}));mesh.count=function(streamVertexSets){return streamVertexSets.reduce((function(totalStatuses,streamVertexSet){return totalStatuses+Math.max(streamVertexSet.length,0)}),0)}(streamVertexSets);var _b=mesh.geometry.attributes,color=_b.color,status=_b.status,statusIndex=0,colorIndex=0,rowHeight=HEIGHT/dataStreams.length,margin=STATUS_MARGIN_TOP_PX/chartSize.height,vizHeight=rowHeight-margin;streamVertexSets.forEach((function(streamVertexSet,setIndex){var prevY,currentDefaultGrayColor=DEFAULT_STATUS_BAR_COLOR_1;streamVertexSet.forEach((function(currVertex,v){var _a=(streamVertexSet[v+1]||[])[0],nextX=void 0===_a?void 0:_a,currX=currVertex[0],currY=currVertex[1];null!=prevY&&prevY!==currY&&(currentDefaultGrayColor=currentDefaultGrayColor===DEFAULT_STATUS_BAR_COLOR_1?DEFAULT_STATUS_BAR_COLOR_2:DEFAULT_STATUS_BAR_COLOR_1);var breachedThreshold=(0,_getDataPoints_1a3cf1be_js__WEBPACK_IMPORTED_MODULE_0__.e)(currY,thresholds);if(null!=breachedThreshold&&thresholdOptions.showColor){var _b=(0,_clipSpaceConversion_3d30ad2d_js__WEBPACK_IMPORTED_MODULE_1__.g)(breachedThreshold.color),rr=_b[0],gg=_b[1],bb=_b[2];color.array[colorIndex]=rr,color.array[colorIndex+1]=gg,color.array[colorIndex+2]=bb}else{var r=currentDefaultGrayColor[0],g=currentDefaultGrayColor[1],b=currentDefaultGrayColor[2];color.array[colorIndex]=r,color.array[colorIndex+1]=g,color.array[colorIndex+2]=b}colorIndex+=3,status.array[statusIndex]=toClipSpace(currX),status.array[statusIndex+1]=HEIGHT-rowHeight*(setIndex+1),status.array[statusIndex+2]=function(_a){var nextX=_a.nextX,currX=_a.currX,toClipSpace=_a.toClipSpace,alarms=_a.alarms,expires=alarms?alarms.expires:void 0;if(null!=expires){var maxWidth=(0,_getDistanceFromDuration_5c7da5d2_js__WEBPACK_IMPORTED_MODULE_2__.g)(toClipSpace,expires);return null==nextX?maxWidth:Math.min((0,_getDistanceFromDuration_5c7da5d2_js__WEBPACK_IMPORTED_MODULE_2__.g)(toClipSpace,nextX-currX),maxWidth)}return null!=nextX?(0,_getDistanceFromDuration_5c7da5d2_js__WEBPACK_IMPORTED_MODULE_2__.g)(toClipSpace,nextX-currX):(0,_getDistanceFromDuration_5c7da5d2_js__WEBPACK_IMPORTED_MODULE_2__.g)(toClipSpace,Date.now()-currX)}({currX,nextX,toClipSpace,alarms}),status.array[statusIndex+3]=vizHeight,statusIndex+=4,prevY=currY}))})),status.needsUpdate=!0,color.needsUpdate=!0},unitSquare=[0,0,0,1,1,0,0,1,1,0,1,1],statusMesh=function(_a){var alarms=_a.alarms,dataStreams=_a.dataStreams,toClipSpace=_a.toClipSpace,bufferFactor=_a.bufferFactor,minBufferSize=_a.minBufferSize,thresholdOptions=_a.thresholdOptions,thresholds=_a.thresholds,chartSize=_a.chartSize,instGeo=new _getDataPoints_1a3cf1be_js__WEBPACK_IMPORTED_MODULE_0__.I,bufferSize=Math.max(minBufferSize,(0,_clipSpaceConversion_3d30ad2d_js__WEBPACK_IMPORTED_MODULE_1__.n)(dataStreams)*bufferFactor);!function(geometry,bufferSize){geometry.setAttribute("position",new _getDataPoints_1a3cf1be_js__WEBPACK_IMPORTED_MODULE_0__.B(new Float32Array(unitSquare),2)),geometry.setAttribute("status",new _getDataPoints_1a3cf1be_js__WEBPACK_IMPORTED_MODULE_0__.b(new Float32Array(4*bufferSize),4,!1)),geometry.setAttribute("color",new _getDataPoints_1a3cf1be_js__WEBPACK_IMPORTED_MODULE_0__.b(new Uint8Array(3*bufferSize),3,!0))}(instGeo,bufferSize);var statusChartMaterial=new _getDataPoints_1a3cf1be_js__WEBPACK_IMPORTED_MODULE_0__.R({vertexShader:"\nprecision highp float;\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nattribute vec4 status;\nattribute vec2 position;\nattribute vec3 color;\nvarying vec3 vColor;\n\nvoid main() {\n  float width = status.z;\n  float height = status.w;\n\n  gl_Position = projectionMatrix * modelViewMatrix * vec4(position.x * width + status.x, position.y * height + status.y, 0.0, 1.0);\n  vColor = color;\n}\n",fragmentShader:"\nprecision highp float;\nvarying vec3 vColor;\n\nvoid main() {\n  gl_FragColor = vec4(vColor, 1.0);\n}\n",side:_getDataPoints_1a3cf1be_js__WEBPACK_IMPORTED_MODULE_0__.D,transparent:!1}),mesh=new _getDataPoints_1a3cf1be_js__WEBPACK_IMPORTED_MODULE_0__.a(instGeo,statusChartMaterial,bufferSize);return updateMesh({dataStreams,mesh,toClipSpace,thresholds,thresholdOptions,chartSize,alarms}),mesh.frustumCulled=!1,mesh},chartScene=function(_a){var alarms=_a.alarms,dataStreams=_a.dataStreams,container=_a.container,viewport=_a.viewport,bufferFactor=_a.bufferFactor,minBufferSize=_a.minBufferSize,onUpdate=_a.onUpdate,thresholdOptions=_a.thresholdOptions,thresholds=_a.thresholds,chartSize=_a.chartSize,scene=new _getDataPoints_1a3cf1be_js__WEBPACK_IMPORTED_MODULE_0__.S,toClipSpace=(0,_clipSpaceConversion_3d30ad2d_js__WEBPACK_IMPORTED_MODULE_1__.a)(viewport);return scene.add(statusMesh({alarms,dataStreams,toClipSpace,bufferFactor,minBufferSize,thresholdOptions,thresholds,chartSize})),(0,_clipSpaceConversion_3d30ad2d_js__WEBPACK_IMPORTED_MODULE_1__.c)({scene,viewport,container,toClipSpace,onUpdate})},updateChartScene=function(_a){var scene=_a.scene,alarms=_a.alarms,dataStreams=_a.dataStreams,minBufferSize=_a.minBufferSize,bufferFactor=_a.bufferFactor,viewport=_a.viewport,container=_a.container,onUpdate=_a.onUpdate,chartSize=_a.chartSize,thresholdOptions=_a.thresholdOptions,thresholds=_a.thresholds,hasDataChanged=_a.hasDataChanged,hasAnnotationChanged=_a.hasAnnotationChanged,hasSizeChanged=_a.hasSizeChanged,statuses=scene.scene.children[0],isDataOverflowingBuffer=function(statuses){return statuses.geometry.attributes.status.array.length/4}(statuses)<(0,_clipSpaceConversion_3d30ad2d_js__WEBPACK_IMPORTED_MODULE_1__.n)(dataStreams);return isDataOverflowingBuffer||(0,_clipSpaceConversion_3d30ad2d_js__WEBPACK_IMPORTED_MODULE_1__.b)(viewport,scene.toClipSpace)?chartScene({onUpdate,dataStreams,alarms,container,viewport,minBufferSize,bufferFactor,chartSize,thresholdOptions,thresholds}):(function(_a){var alarms=_a.alarms,statuses=_a.statuses,dataStreams=_a.dataStreams,toClipSpace=_a.toClipSpace,thresholdOptions=_a.thresholdOptions,thresholds=_a.thresholds,chartSize=_a.chartSize,hasDataChanged=_a.hasDataChanged,hasAnnotationChanged=_a.hasAnnotationChanged,hasSizeChanged=_a.hasSizeChanged;(hasDataChanged||hasAnnotationChanged||hasSizeChanged)&&updateMesh({dataStreams,mesh:statuses,toClipSpace,thresholds,thresholdOptions,chartSize,alarms})}({alarms,statuses,dataStreams,toClipSpace:scene.toClipSpace,thresholdOptions,thresholds,chartSize,hasDataChanged,hasAnnotationChanged,hasSizeChanged}),scene)}},"../node_modules/@iot-app-kit-visualizations/core/dist/esm-es5/chartSize-6ceb3800.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{C:()=>CHART_SIZE});var CHART_SIZE={width:100,height:100}},"../node_modules/@iot-app-kit-visualizations/core/dist/esm-es5/dataTypes-aaacf3dd.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{A:()=>AggregateType,S:()=>STREAM_ICON_STROKE_LINECAP,T:()=>TREND_ICON_DASH_ARRAY,a:()=>STREAM_ICON_STROKE_WIDTH,b:()=>STREAM_ICON_PATH_COMMAND});var STREAM_ICON_STROKE_LINECAP="round",STREAM_ICON_STROKE_WIDTH=3,STREAM_ICON_PATH_COMMAND="M 2 2 H 15",TREND_ICON_DASH_ARRAY="1, 5",AggregateType={AVERAGE:"AVERAGE",COUNT:"COUNT",MAXIMUM:"MAXIMUM",MINIMUM:"MINIMUM",STANDARD_DEVIATION:"STANDARD_DEVIATION",SUM:"SUM"}},"../node_modules/@iot-app-kit-visualizations/core/dist/esm-es5/getDistanceFromDuration-5c7da5d2.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{g:()=>getDistanceFromDuration});var getDistanceFromDuration=function(toClipSpace,milliseconds){return Math.abs(toClipSpace(new Date(milliseconds).getTime())-toClipSpace(new Date(0).getTime()))}},"../node_modules/@iot-app-kit-visualizations/core/dist/esm-es5/multiple-statuses.entry.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{multiple_statuses:()=>MultipleStatuses});var _index_c7728300_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("../node_modules/@iot-app-kit-visualizations/core/dist/esm-es5/index-c7728300.js"),_webglContext_f702bea7_js__WEBPACK_IMPORTED_MODULE_2__=(__webpack_require__("../node_modules/@iot-app-kit-visualizations/core/dist/esm-es5/getDataPoints-1a3cf1be.js"),__webpack_require__("../node_modules/@iot-app-kit-visualizations/core/dist/esm-es5/webglContext-f702bea7.js")),_dataConstants_8e079f60_js__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("../node_modules/@iot-app-kit-visualizations/core/dist/esm-es5/dataConstants-8e079f60.js"),_time_33466212_js__WEBPACK_IMPORTED_MODULE_6__=(__webpack_require__("../node_modules/@iot-app-kit-visualizations/core/dist/esm-es5/_commonjsHelpers-1d681858.js"),__webpack_require__("../node_modules/@iot-app-kit-visualizations/core/dist/esm-es5/clipSpaceConversion-3d30ad2d.js"),__webpack_require__("../node_modules/@iot-app-kit-visualizations/core/dist/esm-es5/time-33466212.js")),_chartSize_6ceb3800_js__WEBPACK_IMPORTED_MODULE_9__=(__webpack_require__("../node_modules/@iot-app-kit-visualizations/core/dist/esm-es5/constants-ebd051c2.js"),__webpack_require__("../node_modules/@iot-app-kit-visualizations/core/dist/esm-es5/v4-9366210a.js"),__webpack_require__("../node_modules/@iot-app-kit-visualizations/core/dist/esm-es5/chartSize-6ceb3800.js")),_dataTypes_aaacf3dd_js__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("../node_modules/@iot-app-kit-visualizations/core/dist/esm-es5/dataTypes-aaacf3dd.js"),_chartScene_e5d2354e_js__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("../node_modules/@iot-app-kit-visualizations/core/dist/esm-es5/chartScene-e5d2354e.js"),X_MIN=new Date(2e3,0,0),X_MAX=new Date(2e3,0,1),WIDTH=X_MAX.getTime()-X_MIN.getTime(),TEST_DATA_POINT_1={x:X_MIN.getTime()+WIDTH/3,y:25},TEST_DATA_POINT_2={x:X_MIN.getTime()+WIDTH*(2/3),y:50},MultipleStatuses=function(){function MultipleStatuses(hostRef){(0,_index_c7728300_js__WEBPACK_IMPORTED_MODULE_0__.r)(this,hostRef)}return MultipleStatuses.prototype.componentDidLoad=function(){var _a,_b,container=this.el.querySelector("#test-container"),scene=(0,_chartScene_e5d2354e_js__WEBPACK_IMPORTED_MODULE_11__.c)({alarms:{expires:5*_time_33466212_js__WEBPACK_IMPORTED_MODULE_6__.H},viewport:{start:X_MIN,end:X_MAX,yMin:0,yMax:_chartScene_e5d2354e_js__WEBPACK_IMPORTED_MODULE_11__.H},dataStreams:[{id:"test-stream",aggregationType:_dataTypes_aaacf3dd_js__WEBPACK_IMPORTED_MODULE_10__.A.AVERAGE,aggregates:(_a={},_a[5*_time_33466212_js__WEBPACK_IMPORTED_MODULE_6__.H]=[TEST_DATA_POINT_1],_a),data:[],resolution:5*_time_33466212_js__WEBPACK_IMPORTED_MODULE_6__.H,name:"test-stream-name",color:"black",dataType:_dataConstants_8e079f60_js__WEBPACK_IMPORTED_MODULE_3__.D.NUMBER},{id:"test-stream-2",aggregationType:_dataTypes_aaacf3dd_js__WEBPACK_IMPORTED_MODULE_10__.A.AVERAGE,aggregates:(_b={},_b[5*_time_33466212_js__WEBPACK_IMPORTED_MODULE_6__.H]=[TEST_DATA_POINT_2],_b),data:[],name:"test-stream-name-2",color:"red",resolution:5*_time_33466212_js__WEBPACK_IMPORTED_MODULE_6__.H,dataType:_dataConstants_8e079f60_js__WEBPACK_IMPORTED_MODULE_3__.D.NUMBER}],container,chartSize:_chartSize_6ceb3800_js__WEBPACK_IMPORTED_MODULE_9__.C,minBufferSize:100,bufferFactor:2,thresholdOptions:{showColor:!1},thresholds:[]});_webglContext_f702bea7_js__WEBPACK_IMPORTED_MODULE_2__.w.addChartScene({manager:scene});var rect=container.getBoundingClientRect();_webglContext_f702bea7_js__WEBPACK_IMPORTED_MODULE_2__.w.setChartRect(scene.id,Object.assign({density:1},rect.toJSON()))},MultipleStatuses.prototype.render=function(){return(0,_index_c7728300_js__WEBPACK_IMPORTED_MODULE_0__.h)("iot-app-kit-vis-webgl-context",null,(0,_index_c7728300_js__WEBPACK_IMPORTED_MODULE_0__.h)("div",{id:"test-container",style:{width:_chartSize_6ceb3800_js__WEBPACK_IMPORTED_MODULE_9__.C.width+"px",height:_chartSize_6ceb3800_js__WEBPACK_IMPORTED_MODULE_9__.C.height+"px"}}))},Object.defineProperty(MultipleStatuses.prototype,"el",{get:function(){return(0,_index_c7728300_js__WEBPACK_IMPORTED_MODULE_0__.g)(this)},enumerable:!1,configurable:!0}),MultipleStatuses}()}}]);